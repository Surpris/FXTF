# このモジュールについて
このモジュールはFXのデータを解析するためのツールを提供する。   

## 必要な機能
* FXのデータをダウンロード・保存する
    + リアルタイム対応
* FXのデータを読み込む
    + リアルタイム対応
* FXのデータを表示する
    + リアルタイム対応
    + ローソク足
* FXのデータを解析する
    + リアルタイム対応
* これらをGUIで扱う
* 情報を収集し、一覧にする
    + データはどこから落とす？

## 解析方法
+ 1, 5, 10, 15, 30, 60minのビンサイズ
+ トレンド線
    * できればハンドフリーで引けるようにしたい
+ レンジ解析
+ 移動平均線（SMA）
    * 短期線、中期線、長期線
+ ボリンジャーバンド
    * ３σまで対応
* 一目均衡表
+ 微分解析
    * 何次まで？
+ Fourier解析
    * スペクトログラム解析が良さそうか。
+ 統計論的解析
    * 条件付き確率：ある時刻 $t$ の時点でレートが$P$であったとき、次の時刻 $t'$ でレートが $Q$ である確率、みたいなもの
    * もしくはある時刻 $t$ であるパラメータが $y(t)$ であったとき、時刻 $t+\tau$ でレートが下がっている確率 $P(t+\tau|y(t))$ みたいなもの
    * 移動平均線？
+ 他、試して使えそうなもの

## 仕様
* データの保存は１分毎
* 過去のデータと現在取得中のデータを接続する
    + データベース（後述）にまとめてしまう
* データの読み込みは可能な限り速く行う
    + 外為オンラインだと５秒が最速
* バックグラウンド処理
    + データの取得
    + データの解析
    + データの表示
* データの表示は各ビンサイズで行う
* 描画は分離して出すことも一面にして出すこともできる
    + 切り替えられるようにする

##データについて
取得したデータおよび解析で得られた結果は、SQLiteを利用してRDBに保存することにする。   
データベースの構成は次のようにする。   

* メインテーブル
    + (datetime varchar(255), dateval int, ask real, bid real)
        * `id autoincrement`を入れようかと思ったが、別に必要ないので除外。
* 解析テーブル：
    + (second int, open real, high real, low real, close real, ...)
    + 各ビンサイズごと（つまり1分足、5分足ごと）に作成する。
    + テーブル名は`barXXX`として、`XXX`には分に変換したものを入れる。
    + id、datetime、secondはメインテーブルのものに対応させる。
        * 例えばメインテーブルの`datetime="1990/01/01 10:00:00", ...`が終値`close`を与える部分であれば、これを解析テーブルに追加する。
        * 現時点ではこの処理の時間がかかりすぎるため、ビンのエッジの日時を入れるようにしている。
    + 後ろはほかの解析項目（SMAなど）を順次追加する構成。
        * OHLCまでは計算済みとして、それ以降は`toDataFrame`によって取得したデータを解析し、updateしていく。
* 他のテーブル
    + 統計解析の結果を入れるテーブルを用意する？

為替レートの組ごとにデータベースを用意する。   
１か月ごとのデータベースを作成する。   
SQLは動作が遅い？32万のレコードに対して、すべての情報をとってくるのに3秒かかる。   
しかしリアルタイム解析の場合は１処理が13 msであり、１秒を超えるためには77この処理が必要になる。
